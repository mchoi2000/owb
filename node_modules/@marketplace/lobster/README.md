# lobster

## Overview

This is a Gulp plugin to push istanbul coverage info to marketplace coverage endpoint.

## Usage
The Development Tooling and Test squad is making the code coverage for all squads available to everyone through a dashboard. The results are available at any time with the latest code coverage results.

[Request an api key](http://buoy.mybluemix.net/request-key)

To use this plugin, implement this short snippet of code:

If you don't already have the "@marketplace" gem fury repository defined in your project:

 1. Request an api key at: http://buoy.mybluemix.net/request-key
 2. Create a file named ".npmrc" in the root of your project
 3. Paste the following code in the ".npmrc" file:

 ```
 registry=http://registry.npmjs.org/
 ca=
 @serviceengage:registry=https://npm.fury.io/Vqssxs71smqsBDKqk7oj/serviceengage/
 @marketplace:registry=https://npm.fury.io/Vqssxs71smqsBDKqk7oj/serviceengage/
 ```


Add this to your package.json dependencies:

```
    "@marketplace/lobster": "latest"
```


Add this to your gulp task:

```
"use strict";

let gulp = require("gulp"),
    lobster = require("@marketplace/lobster"),
    opts = {
        apiKey: "<Your Buoy api key>"
    };

module.exports = function () {
    return lobster.getIstanbulDefaultPathStream()
    .pipe(lobster.sendIstanbulCoverageInfo(opts));
};
```


Here's an example where there is just a single gulpfile and a non-standard coverage report location

```
let lobster = require('@marketplace/lobster'),
opts = {
   apiKey: "<Your Buoy api key>"
};

gulp.task('report-coverage', function() {
  gulp.src("non-standard-location/lcov-report/index.html")
    .pipe(lobster.sendIstanbulCoverageInfo(opts));
+});
```

## Testing

Check out the [testing guide](./docs/TESTING.md)

## Debugging The Code

Check out the [debugging guide](./docs/DEBUGGING.md)
