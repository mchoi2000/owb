# Debugging the Code

This document is to get you started using the node-inspector module along with the [Blink Developer Tools](http://www.chromium.org/blink) to debug the gulp-revalidator application.


## Prerequisites

- The gulp-revalidator project source files set up with ```$ npm install```

- The [node-inspector](https://github.com/node-inspector/node-inspector) module installed (eg., ```$ npm install node-inspector```)

- A recent version of [Google Chrome](http://www.google.com/chrome/)


## Debugging the Automated Test Suite

1. In the shell, start node-inspector by executing the command line:

    ```
    $ node-inspector
    ```

2. In the shell, start the tests by executing the command line:

    ```
    $ npm run-script debug-test
    ```

3. Open Google Chrome at this URL:

    [http://127.0.0.1:8080/?ws=127.0.0.1:8080&port=5858](http://127.0.0.1:8080/?ws=127.0.0.1:8080&port=5858)

4. The Blink debugger will come up with the app paused at the start of execution.  Note that this will take 5+ seconds at least before the debugger is fully initialized and showing the source code.  Be patient.

5. Set breakpoints in the code area of interest

6. Click the debugger "Play" button to run the app until it hits your breakpoint.

7. All functions, features, and behavior of the Blink debugger mirror the client side debugger on Google Chrome

8. Happy debugging!


## Debugging an Already Running Node.js Process

You can attach a debugger to an already running Node.js process by sending a SIGUSR1 signal to the process.  This is useful if something happened in the currently running node process, and we need to debug it specifically rather than restart node and recreate the steps to get the app to that point.

1. In the shell find out the process id (PID) of the Node.js process you want to debug:

    ```
    $ ps -ef | grep node
    ```

2. Note the PID down

3. In the shell, execute the command line:

    ```
    $ kill -s SIGUSR1 <PID>
    ```

4. In the shell, execute the command line:

    ```
    $ node-inspector
    ```

5. An informational message will be displayed giving the URL of the debugging session.

6. Open that URL in Google Chrome, and you will be presented with the Blink debugger.
